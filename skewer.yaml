title: Accessing an FTP server using Skupper
github_actions_url: https://github.com/ssorj/skupper-example-ftp/actions/workflows/main.yaml
sites:
  west:
    kubeconfig: ~/.kube/config-west
    namespace: west
  east:
    kubeconfig: ~/.kube/config-east
    namespace: east
steps:
  - standard: configure_separate_console_sessions
  - standard: access_your_clusters
  - standard: set_up_your_namespaces
  - standard: install_skupper_in_your_namespaces
  - standard: check_the_status_of_your_namespaces
  - standard: link_your_namespaces
  - title: Deploy the FTP server
    commands:
      east:
        - run: kubectl apply -f ftp-server
  - title: Expose the FTP server
    commands:
      east:
        - await: deployment/ftp-server
        - run: skupper expose deployment/ftp-server --port 21100 --port 2121 --target-port 21100 --target-port 21
  - title: Test the FTP server
    commands:
      west:
        - await: service/ftp-server
        - run: kubectl run ftp-put --attach --rm --image=docker.io/curlimages/curl --restart=Never -- -T /etc/os-release ftp://example:example@ftp-server:2121
        - run: kubectl run ftp-get --attach --rm --image=docker.io/curlimages/curl --restart=Never -- ftp://example:example@ftp-server:2121/os-release
  - standard: accessing_the_web_console
  - standard: cleaning_up
    commands:
      west:
        - run: skupper delete
      east:
        - run: skupper delete
        - run: kubectl delete deployment/ftp-server
